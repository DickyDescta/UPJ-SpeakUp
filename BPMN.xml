<?xml version="1.0" encoding="UTF-8"?>
<definitions xmlns="http://www.omg.org/spec/BPMN/20100524/MODEL"
    xmlns:bpmndi="http://www.omg.org/spec/BPMN/20100524/DI"
    xmlns:dc="http://www.omg.org/spec/DD/20100524/DC"
    xmlns:di="http://www.omg.org/spec/DD/20100524/DI"
    id="definitions"
    targetNamespace="http://bpmn.io/schema/bpmn">

    <process id="pengaduanMahasiswa" name="Proses Pengaduan Mahasiswa" isExecutable="false">
        <!-- Start Event -->
        <startEvent id="startEvent" name="Mulai">
            <outgoing>flow1</outgoing>
        </startEvent>

        <!-- Mahasiswa Login -->
        <task id="loginMahasiswa" name="Login Mahasiswa">
            <incoming>flow1</incoming>
            <outgoing>flow2</outgoing>
        </task>

        <!-- Verifikasi -->
        <exclusiveGateway id="verifikasiGateway" name="Verifikasi">
            <incoming>flow2</incoming>
            <outgoing>flow3</outgoing>
            <outgoing>flow4</outgoing>
        </exclusiveGateway>

        <!-- Jika Berhasil -->
        <task id="dashboardMahasiswa" name="Dashboard">
            <incoming>flow3</incoming>
            <outgoing>flow5</outgoing>
        </task>

        <!-- Jika Gagal -->
        <task id="pesanError" name="Tampilkan Pesan Error">
            <incoming>flow4</incoming>
            <outgoing>flowEndError</outgoing>
        </task>

        <!-- Pengaduan -->
        <task id="ajukanPengaduan" name="Ajukan Pengaduan">
            <incoming>flow5</incoming>
            <outgoing>flow6</outgoing>
        </task>

        <task id="uploadBukti" name="Upload Bukti">
            <incoming>flow6</incoming>
            <outgoing>flow7</outgoing>
        </task>

        <task id="kirimPengaduan" name="Kirim Pengaduan">
            <incoming>flow7</incoming>
            <outgoing>flowNotifAdmin</outgoing>
        </task>

        <!-- Sistem Notifikasi -->
        <intermediateThrowEvent id="notifikasiAdmin" name="Notifikasi ke Admin">
            <incoming>flowNotifAdmin</incoming>
            <outgoing>flow8</outgoing>
        </intermediateThrowEvent>

        <!-- Admin Melihat Pengaduan -->
        <task id="loginAdmin" name="Login Admin">
            <incoming>flow8</incoming>
            <outgoing>flow9</outgoing>
        </task>

        <task id="lihatPengaduan" name="Melihat Pengaduan">
            <incoming>flow9</incoming>
            <outgoing>flow10</outgoing>
        </task>

        <task id="tanggapanPengaduan" name="Memberikan Tanggapan">
            <incoming>flow10</incoming>
            <outgoing>flowUpdateStatus</outgoing>
        </task>

        <task id="updateStatus" name="Update Status">
            <incoming>flowUpdateStatus</incoming>
            <outgoing>flowNotifMahasiswa</outgoing>
        </task>

        <!-- Sistem Notifikasi ke Mahasiswa -->
        <intermediateThrowEvent id="notifikasiMahasiswa" name="Notifikasi ke Mahasiswa">
            <incoming>flowNotifMahasiswa</incoming>
            <outgoing>flow11</outgoing>
        </intermediateThrowEvent>

        <!-- Mahasiswa Melihat Status -->
        <task id="melihatStatus" name="Melihat Status">
            <incoming>flow11</incoming>
            <outgoing>flow12</outgoing>
        </task>

        <!-- Feedback -->
        <exclusiveGateway id="feedbackGateway" name="Feedback?">
            <incoming>flow12</incoming>
            <outgoing>flow13</outgoing>
            <outgoing>flowEnd</outgoing>
        </exclusiveGateway>

        <task id="kirimFeedback" name="Kirim Feedback">
            <incoming>flow13</incoming>
            <outgoing>flowEnd</outgoing>
        </task>

        <!-- End Events -->
        <endEvent id="endEvent" name="Selesai">
            <incoming>flowEnd</incoming>
        </endEvent>

        <endEvent id="endErrorEvent" name="Login Gagal">
            <incoming>flowEndError</incoming>
        </endEvent>

        <!-- Sequence Flows -->
        <sequenceFlow id="flow1" sourceRef="startEvent" targetRef="loginMahasiswa"/>
        <sequenceFlow id="flow2" sourceRef="loginMahasiswa" targetRef="verifikasiGateway"/>
        <sequenceFlow id="flow3" sourceRef="verifikasiGateway" targetRef="dashboardMahasiswa"/>
        <sequenceFlow id="flow4" sourceRef="verifikasiGateway" targetRef="pesanError"/>
        <sequenceFlow id="flow5" sourceRef="dashboardMahasiswa" targetRef="ajukanPengaduan"/>
        <sequenceFlow id="flow6" sourceRef="ajukanPengaduan" targetRef="uploadBukti"/>
        <sequenceFlow id="flow7" sourceRef="uploadBukti" targetRef="kirimPengaduan"/>
        <sequenceFlow id="flowNotifAdmin" sourceRef="kirimPengaduan" targetRef="notifikasiAdmin"/>
        <sequenceFlow id="flow8" sourceRef="notifikasiAdmin" targetRef="loginAdmin"/>
        <sequenceFlow id="flow9" sourceRef="loginAdmin" targetRef="lihatPengaduan"/>
        <sequenceFlow id="flow10" sourceRef="lihatPengaduan" targetRef="tanggapanPengaduan"/>
        <sequenceFlow id="flowUpdateStatus" sourceRef="tanggapanPengaduan" targetRef="updateStatus"/>
        <sequenceFlow id="flowNotifMahasiswa" sourceRef="updateStatus" targetRef="notifikasiMahasiswa"/>
        <sequenceFlow id="flow11" sourceRef="notifikasiMahasiswa" targetRef="melihatStatus"/>
        <sequenceFlow id="flow12" sourceRef="melihatStatus" targetRef="feedbackGateway"/>
        <sequenceFlow id="flow13" sourceRef="feedbackGateway" targetRef="kirimFeedback"/>
        <sequenceFlow id="flowEnd" sourceRef="kirimFeedback" targetRef="endEvent"/>
        <sequenceFlow id="flowEndError" sourceRef="pesanError" targetRef="endErrorEvent"/>
    </process>

</definitions>
